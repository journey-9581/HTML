<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step07_Drawpanel.html</title>
    <style>
        canvas{
            border: 1px dashed black;
        }
    </style>
</head>
<body>
    <h1>그림판</h1>
    <canvas id="myCanvas" width="500" height="500"></canvas>

    <script>
        // canvas 요소의 참조값 얻어오기
        let canvas=document.querySelector("#myCanvas");
        // canvas에 렌더링 할 수 있는 도구(context)의 참조값 얻어오기
        let context=canvas.getContext("2d");

        context.lineWidth=10; // 선의 굵기
        context.lineCap="round"; // 선의 시작과 끝을 둥글게 만들기
        context.lineJoin="round"; // 선의 교차점을 둥글게 만들기
        context.strokeStyle="green"; //선의 색상

        /*
        context.beginPath(); // 경로 시작
        context.moveTo(100, 100); // 출발점으로 이동
        context.lineTo(200, 200); // 이을 점 지정
        context.lineTo(200, 100); // 이을 점 지정
        context.stroke(); // 그려짐
        context.closePath(); // 경로 마무리
        */

        //현재 그림을 그리고 있는지 여부
        let isDraw=false; // 초기값을 일단 false로 지정

        canvas.addEventListener("mousedown", function(event){
            isDraw=true;
            //이벤트가 일어난 곳의 좌표
            let x=event.offsetX;
            let y=event.offsetY;
            //mousedown 이벤트가 일어난 지점에서부터 그릴 준비
            context.beginPath();
            context.moveTo(x,y);
        });
        //canvas에 mousemove 이벤트 처리
        canvas.addEventListener("mousemove", function(event){
            //만일 현재 그림을 그리고 있는 상태 일때
            if(isDraw == true){
            //이벤트가 일어난 곳의 좌표
            let x=event.offsetX;
            let y=event.offsetY;
            context.lineTo(x,y);
            context.stroke();
            }
        });

        canvas.addEventListener("mouseup", function(){
            //더 이상 그려지지 않도록 상태값을 바꿔준다
            isDraw=false;
        })
    </script>
</body>
</html>